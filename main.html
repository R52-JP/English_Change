<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>英語の活用形</title>
  <style>
    h1 {
        border-bottom: double 5px #FFC778;
    }
    table {
        margin:auto;
        line-height: 2;
        font-family: "Hiragino Maru Gothic ProN W4";
        font-size: 25px;
        text-align: center;
    }
    .button1 {
      text-align: center;
    }
    button {
      font-family: "Hiragino Maru Gothic ProN W4";
      font-size: 25px;
    }
    .tf {
      font-family: "Hiragino Maru Gothic ProN W4";
      font-size: 25px;
    }
    .credit {
      font-size: 20px;
      font-family: "Hiragino Maru Gothic ProN W4";
    }
    input {
      font-family: "Hiragino Maru Gothic ProN W4";
      font-size: 25px;
      width: 90%;
    }
    input::placeholder {
      font-size: 20px;
    }
  </style>
</head>
<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script language="javascript" type="text/javascript">
    url = "list.txt";
    text = ""
    $.get(url, (data) => {
      console.log(data)
      word_list = data.split("\n")
      for ( let i = 0; i < word_list.length; i++ ) {
          word_list[i] = word_list[i].split("-");
        console.log(word_list[i][1])
      }
      console.log(word_list)
    });
    var a = 0
    function next_word() {
	    document.getElementById("b1").disabled = true;
      document.getElementById("now").innerText = word_list[a][0];
      document.getElementById("tf").innerText = "";
      document.getElementById("c1").value = "";
      document.getElementById("c2").value = "";
      a=a+1
    }
    
    next_word()
    
    var check1 = ""
    var check2 = ""
    
    function correct_check() {
      
      if (word_list[a][1].indexOf('/') !== -1) {
        check1 = (document.getElementById("c1").value == word_list[a][1].split("/")[0] || document.getElementById("c1").value == word_list[a][1].split("/")[1])
      }
      else {
        check1 = (document.getElementById("c1").value == word_list[a][1])
      }
      
      if (word_list[a][2].indexOf('/') !== -1) {
        check2 = (document.getElementById("c2").value == word_list[a][2].split("/")[0] || document.getElementById("c2").value == word_list[a][1].split("/")[2])
      }
      else {
        check2 = document.getElementById("c2").value == word_list[a][2]
      }
      if (check1 && check2) {
        document.getElementById("tf").innerText = "正解!";
	      document.getElementById("b1").disabled = false;
      }
      else {
        document.getElementById("tf").innerText = "残念!";
      }
    }
    function shuffle(array) {
	// 空のオブジェクトを作成する
	let obj = {};

	// 受け取った配列を繰り返す
	for (let i = 0; i < array.length; i++) {

		// ランダムな数値を生成する ※配列の数より少ないと永久ループする
		let rand = Math.floor(Math.random() * 10000000);

		// 同じキー名がないか判別する
		if (!obj[rand]) {
			// 同じキー名がない場合にobjに追加する
			obj[rand] = array[i];
		} else {
			// 同じキー名ある場合、やり直す
			i--;
		}

	}

	// 作成したオブジェクトの値から配列を作成して返す
	return Object.values(obj);
}
    function reset() {
      word_list = shuffle(word_list)
      a = 0
      document.getElementById("b1").disabled = false;
      document.getElementById("b2").disabled = false;
      next_word()
    }
  </script>
  <h1>英語の活用形</h1>
  <table border="1" style="border-collapse: collapse">
  <tr>
    <th width="20%">現在形</th>
    <th width="20%">過去形</th>
    <th width="20%">過去分詞形</th>
  </tr>
  <tr>
    <td id="now"></td>
    <td><input type="text" placeholder="入力してください..." id="c1"></td>
    <td><input type="text" placeholder="入力してください..." id="c2"></td>
  </tr>
  </table>
  <p></p>
  <div class="button1">
  <button onclick="reset()">スタート</button><a>　　　　</a><button onclick="next_word()" id="b1" disabled>Next Word</button><a>　　　　</a><button onclick="correct_check()" id="b2" disabled>正誤判定</button>
	  <p id="tf" class="tf"></p>
	  <p class="tf" id="count"></p>
  <p class="tf">（注意）［Next Word］ボタンを押してから始めてください。</p>
  <p class="credit">製作・・・［データベース］Tomato.   ［プログラム］R. Fukue</p>
  </div>
</body>
</html>

